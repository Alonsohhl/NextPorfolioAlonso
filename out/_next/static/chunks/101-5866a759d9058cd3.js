"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{699:function(e,t,r){/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(4090),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,i=n.useEffect,l=n.useLayoutEffect,s=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c=void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),a=n[0].inst,c=n[1];return l(function(){a.value=r,a.getSnapshot=t,u(a)&&c({inst:a})},[e,r,t]),i(function(){return u(a)&&c({inst:a}),e(function(){u(a)&&c({inst:a})})},[e]),s(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},2362:function(e,t,r){e.exports=r(699)},9101:function(e,t,r){r.d(t,{SA:function(){return el}});var n=r(4090),a=r(2362);let o=()=>{},i=o(),l=Object,s=e=>e===i,u=e=>"function"==typeof e,c=(e,t)=>({...e,...t}),d=e=>u(e.then),f=new WeakMap,p=0,g=e=>{let t,r;let n=typeof e,a=e&&e.constructor,o=a==Date;if(l(e)!==e||o||a==RegExp)t=o?e.toJSON():"symbol"==n?e.toString():"string"==n?JSON.stringify(e):""+e;else{if(t=f.get(e))return t;if(t=++p+"~",f.set(e,t),a==Array){for(r=0,t="@";r<e.length;r++)t+=g(e[r])+",";f.set(e,t)}if(a==l){t="#";let n=l.keys(e).sort();for(;!s(r=n.pop());)s(e[r])||(t+=r+":"+g(e[r])+",");f.set(e,t)}}return t},y=new WeakMap,h={},m={},_="undefined",E=typeof document!=_,v=()=>typeof window.requestAnimationFrame!=_,w=(e,t)=>{let r=y.get(e);return[()=>!s(t)&&e.get(t)||h,n=>{if(!s(t)){let a=e.get(t);t in m||(m[t]=a),r[5](t,c(a,n),a||h)}},r[6],()=>!s(t)&&t in m?m[t]:!s(t)&&e.get(t)||h]},b=!0,[S,T]=window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[o,o],R={initFocus:e=>(E&&document.addEventListener("visibilitychange",e),S("focus",e),()=>{E&&document.removeEventListener("visibilitychange",e),T("focus",e)}),initReconnect:e=>{let t=()=>{b=!0,e()},r=()=>{b=!1};return S("online",t),S("offline",r),()=>{T("online",t),T("offline",r)}}},O=!n.useId,x="Deno"in window,V=e=>v()?window.requestAnimationFrame(e):setTimeout(e,1),A=x?n.useEffect:n.useLayoutEffect,I="undefined"!=typeof navigator&&navigator.connection,k=!x&&I&&(["slow-2g","2g"].includes(I.effectiveType)||I.saveData),L=e=>{if(u(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?g(e):"",t]},C=0,j=()=>++C;var N={ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:0,MUTATE_EVENT:2,RECONNECT_EVENT:1};async function D(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[n,a,o,l]=t,f=c({populateCache:!0,throwOnError:!0},"boolean"==typeof l?{revalidate:l}:l||{}),p=f.populateCache,g=f.rollbackOnError,h=f.optimisticData,m=!1!==f.revalidate,_=e=>"function"==typeof g?g(e):!1!==g,E=f.throwOnError;if(u(a)){let e=[];for(let t of n.keys())!/^\$(inf|sub)\$/.test(t)&&a(n.get(t)._k)&&e.push(t);return Promise.all(e.map(v))}return v(a);async function v(e){let r;let[a]=L(e);if(!a)return;let[l,c]=w(n,a),[f,g,v,b]=y.get(n),S=f[a],T=()=>m&&(delete v[a],delete b[a],S&&S[0])?S[0](2).then(()=>l().data):l().data;if(t.length<3)return T();let R=o,O=j();g[a]=[O,0];let x=!s(h),V=l(),A=V.data,I=V._c,k=s(I)?A:I;if(x&&c({data:h=u(h)?h(k,A):h,_c:k}),u(R))try{R=R(k)}catch(e){r=e}if(R&&d(R)){if(R=await R.catch(e=>{r=e}),O!==g[a][0]){if(r)throw r;return R}r&&x&&_(r)&&(p=!0,c({data:R=k,_c:i}))}p&&!r&&(u(p)&&(R=p(R,k)),c({data:R,error:i,_c:i})),g[a][1]=j();let C=await T();if(c({_c:i}),r){if(E)throw r;return}return p?C:R}}let F=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},P=(e,t)=>{if(!y.has(e)){let r=c(R,t),n={},a=D.bind(i,e),l=o,s={},u=(e,t)=>{let r=s[e]||[];return s[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},d=(t,r,n)=>{e.set(t,r);let a=s[t];if(a)for(let e of a)e(r,n)},f=()=>{if(!y.has(e)&&(y.set(e,[n,{},{},{},a,d,u]),!x)){let t=r.initFocus(setTimeout.bind(i,F.bind(i,n,0))),a=r.initReconnect(setTimeout.bind(i,F.bind(i,n,1)));l=()=>{t&&t(),a&&a(),y.delete(e)}}};return f(),[e,a,f,l]}return[e,y.get(e)[4]]},[M,U]=P(new Map),W=c({onLoadingSlow:o,onSuccess:o,onError:o,onErrorRetry:(e,t,r,n,a)=>{let o=r.errorRetryCount,i=a.retryCount,l=~~((Math.random()+.5)*(1<<(i<8?i:8)))*r.errorRetryInterval;(s(o)||!(i>o))&&setTimeout(n,l,a)},onDiscarded:o,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:k?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:k?5e3:3e3,compare:(e,t)=>g(e)==g(t),isPaused:()=>!1,cache:M,mutate:U,fallback:{}},{isOnline:()=>b,isVisible:()=>{let e=E&&document.visibilityState;return s(e)||"hidden"!==e}}),J=(e,t)=>{let r=c(e,t);if(t){let{use:n,fallback:a}=e,{use:o,fallback:i}=t;n&&o&&(r.use=n.concat(o)),a&&i&&(r.fallback=c(a,i))}return r},q=(0,n.createContext)({}),$=window.__SWR_DEVTOOLS_USE__,z=(($?window.__SWR_DEVTOOLS_USE__:[]).concat(e=>(t,r,n)=>{let a=r&&function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];let[o]=L(t),[,,,i]=y.get(M),l=i[o];return s(l)?r(...n):(delete i[o],l)};return e(t,a,n)}),(e,t,r)=>{let n=t[e]||(t[e]=[]);return n.push(r),()=>{let e=n.indexOf(r);e>=0&&(n[e]=n[n.length-1],n.pop())}});$&&(window.__SWR_DEVTOOLS_REACT__=n);let B=n.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}),G={dedupe:!0};l.defineProperty(e=>{let{value:t}=e,r=(0,n.useContext)(q),a=u(t),o=(0,n.useMemo)(()=>a?t(r):t,[a,r,t]),l=(0,n.useMemo)(()=>a?o:J(r,o),[a,r,o]),s=o&&o.provider,d=(0,n.useRef)(i);s&&!d.current&&(d.current=P(s(l.cache||M),o));let f=d.current;return f&&(l.cache=f[0],l.mutate=f[1]),A(()=>{if(f)return f[2]&&f[2](),f[3]},[]),(0,n.createElement)(q.Provider,c(e,{value:l}))},"defaultValue",{value:W}),(e,t,r)=>{let{cache:o,compare:l,suspense:d,fallbackData:f,revalidateOnMount:p,revalidateIfStale:g,refreshInterval:h,refreshWhenHidden:m,refreshWhenOffline:_,keepPreviousData:E}=r,[v,b,S,T]=y.get(o),[R,I]=L(e),k=(0,n.useRef)(!1),C=(0,n.useRef)(!1),F=(0,n.useRef)(R),P=(0,n.useRef)(t),M=(0,n.useRef)(r),U=()=>M.current,W=()=>U().isVisible()&&U().isOnline(),[J,q,$,H]=w(o,R),K=(0,n.useRef)({}).current,Q=s(f)?r.fallback[R]:f,X=(e,t)=>{for(let r in K)if("data"===r){if(!l(e[r],t[r])&&(!s(e[r])||!l(ei,t[r])))return!1}else if(t[r]!==e[r])return!1;return!0},Y=(0,n.useMemo)(()=>{let e=!!R&&!!t&&(s(p)?!U().isPaused()&&!d&&(!!s(g)||g):p),r=t=>{let r=c(t);return(delete r._k,e)?{isValidating:!0,isLoading:!0,...r}:r},n=J(),a=H(),o=r(n),i=n===a?o:r(a),l=o;return[()=>{let e=r(J());return X(e,l)?(l.data=e.data,l.isLoading=e.isLoading,l.isValidating=e.isValidating,l.error=e.error,l):(l=e,e)},()=>i]},[o,R]),Z=(0,a.useSyncExternalStore)((0,n.useCallback)(e=>$(R,(t,r)=>{X(r,t)||e()}),[o,R]),Y[0],Y[1]),ee=!k.current,et=v[R]&&v[R].length>0,er=Z.data,en=s(er)?Q:er,ea=Z.error,eo=(0,n.useRef)(en),ei=E?s(er)?eo.current:er:en,el=(!et||!!s(ea))&&(ee&&!s(p)?p:!U().isPaused()&&(d?!s(en)&&g:s(en)||g)),es=!!(R&&t&&ee&&el),eu=s(Z.isValidating)?es:Z.isValidating,ec=s(Z.isLoading)?es:Z.isLoading,ed=(0,n.useCallback)(async e=>{let t,n;let a=P.current;if(!R||!a||C.current||U().isPaused())return!1;let o=!0,c=e||{},d=!S[R]||!c.dedupe,f=()=>O?!C.current&&R===F.current&&k.current:R===F.current,p={isValidating:!1,isLoading:!1},g=()=>{q(p)},y=()=>{let e=S[R];e&&e[1]===n&&delete S[R]},h={isValidating:!0};s(J().data)&&(h.isLoading=!0);try{if(d&&(q(h),r.loadingTimeout&&s(J().data)&&setTimeout(()=>{o&&f()&&U().onLoadingSlow(R,r)},r.loadingTimeout),S[R]=[a(I),j()]),[t,n]=S[R],t=await t,d&&setTimeout(y,r.dedupingInterval),!S[R]||S[R][1]!==n)return d&&f()&&U().onDiscarded(R),!1;p.error=i;let e=b[R];if(!s(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return g(),d&&f()&&U().onDiscarded(R),!1;let u=J().data;p.data=l(u,t)?u:t,d&&f()&&U().onSuccess(t,R,r)}catch(r){y();let e=U(),{shouldRetryOnError:t}=e;!e.isPaused()&&(p.error=r,d&&f()&&(e.onError(r,R,e),(!0===t||u(t)&&t(r))&&W()&&e.onErrorRetry(r,R,e,e=>{let t=v[R];t&&t[0]&&t[0](N.ERROR_REVALIDATE_EVENT,e)},{retryCount:(c.retryCount||0)+1,dedupe:!0})))}return o=!1,g(),!0},[R,o]),ef=(0,n.useCallback)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return D(o,F.current,...t)},[]);if(A(()=>{P.current=t,M.current=r,s(er)||(eo.current=er)}),A(()=>{if(!R)return;let e=ed.bind(i,G),t=0,r=z(R,v,function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r==N.FOCUS_EVENT){let r=Date.now();U().revalidateOnFocus&&r>t&&W()&&(t=r+U().focusThrottleInterval,e())}else if(r==N.RECONNECT_EVENT)U().revalidateOnReconnect&&W()&&e();else if(r==N.MUTATE_EVENT)return ed();else if(r==N.ERROR_REVALIDATE_EVENT)return ed(n)});return C.current=!1,F.current=R,k.current=!0,q({_k:I}),el&&(s(en)||x?e():V(e)),()=>{C.current=!0,r()}},[R]),A(()=>{let e;function t(){let t=u(h)?h(J().data):h;t&&-1!==e&&(e=setTimeout(r,t))}function r(){!J().error&&(m||U().isVisible())&&(_||U().isOnline())?ed(G).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[h,m,_,R]),(0,n.useDebugValue)(ei),d&&s(en)&&R){if(!O&&x)throw Error("Fallback data is required when using suspense in SSR.");P.current=t,M.current=r,C.current=!1;let e=T[R];if(s(e)||B(ef(e)),s(ea)){let e=ed(G);s(ei)||(e.status="fulfilled",e.value=!0),B(e)}else throw ea}return{mutate:ef,get data(){return K.data=!0,ei},get error(){return K.error=!0,ea},get isValidating(){return K.isValidating=!0,eu},get isLoading(){return K.isLoading=!0,ec}}};var H={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},K={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},Q={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},X={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},Y={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Z={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},ee={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},et={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>{null!=e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id&&"type"in e&&"string"==typeof e.type&&"function"in e&&null!=e.function&&"object"==typeof e.function&&"arguments"in e.function&&"string"==typeof e.function.name&&e.function.arguments}))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},er={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},en={[H.code]:H,[K.code]:K,[Q.code]:Q,[X.code]:X,[Y.code]:Y,[Z.code]:Z,[ee.code]:ee,[et.code]:et,[er.code]:er};H.name,H.code,K.name,K.code,Q.name,Q.code,X.name,X.code,Y.name,Y.code,Z.name,Z.code,ee.name,ee.code,et.name,et.code,er.name,er.code;var ea=[H,K,Q,X,Y,Z,ee,et,er].map(e=>e.code),eo=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!ea.includes(r))throw Error("Failed to parse stream string. Invalid code ".concat(r,"."));let n=JSON.parse(e.slice(t+1));return en[r].parse(n)};async function*ei(e){let{isAborted:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new TextDecoder,n=[],a=0;for(;;){let{value:o}=await e.read();if(o&&(n.push(o),a+=o.length,10!==o[o.length-1]))continue;if(0===n.length)break;let i=function(e,t){let r=new Uint8Array(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return e.length=0,r}(n,a);for(let e of(a=0,r.decode(i,{stream:!0}).split("\n").filter(e=>""!==e).map(eo)))yield e;if(null==t?void 0:t()){e.cancel();break}}}function el(e){let{api:t,threadId:r,credentials:a,headers:o,body:i,onError:l}=e,[s,u]=(0,n.useState)([]),[c,d]=(0,n.useState)(""),[f,p]=(0,n.useState)(void 0),[g,y]=(0,n.useState)("awaiting_message"),[h,m]=(0,n.useState)(void 0),_=async(e,n)=>{var s,g;if(null==(s=null==e?void 0:e.preventDefault)||s.call(e),""===c)return;y("in_progress"),u(e=>[...e,{id:"",role:"user",content:c}]),d("");let h=await fetch(t,{method:"POST",credentials:a,headers:{"Content-Type":"application/json",...o},body:JSON.stringify({...i,threadId:null!=(g=null!=r?r:f)?g:null,message:c,data:null==n?void 0:n.data})});if(null==h.body)throw Error("The response body is empty.");try{for await(let{type:e,value:t}of ei(h.body.getReader()))switch(e){case"assistant_message":u(e=>[...e,{id:t.id,role:t.role,content:t.content[0].text.value}]);break;case"data_message":u(e=>{var r;return[...e,{id:null!=(r=t.id)?r:"",role:"data",content:"",data:t.data}]});break;case"assistant_control_data":p(t.threadId),u(e=>{let r=e[e.length-1];return r.id=t.messageId,[...e.slice(0,e.length-1),r]});break;case"error":{let e=Error(t);m(e)}}}catch(e){l&&e instanceof Error&&l(e),m(e)}y("awaiting_message")};return{messages:s,threadId:f,input:c,setInput:d,handleInputChange:e=>{d(e.target.value)},submitMessage:_,status:g,error:h}}!function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7)}}]);